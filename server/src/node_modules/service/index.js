const express = require('express');
const router = express.Router();
const data = require('data');

router.get('/pushes', function(req, res) {
  console.log('getting pushes');
  res.send(data.getPushes(open=true));  
})


router.get('/pushes/:id', function(req, res) {  
  const id = req.params.id
  console.log(`getting push details ${id}`);
  res.send(data.getPush(id));
  
})

router.get('/auth/:id', function(req, res) {
  const id = req.params.id  
  console.log(`route::authorizing ${id}`);
  const result = data.authorise(id);
  console.log(`route::authorized ${id}`);
  res.send(result);
})

module.exports = router;